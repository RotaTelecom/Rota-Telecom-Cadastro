<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ficha de Cadastro - ROTA Internet Fibra</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Roboto', Arial, sans-serif;
      max-width: 650px;
      margin: 20px auto;
      padding: 15px;
      background: #f8f9fa;
      color: #333;
    }
    header { text-align: center; margin-bottom: 25px; position: relative; }
    .logo { max-width: 100px; height: auto; display: block; margin: 0 auto 10px; }
    h1 { color: #25D366; font-size: 2em; margin: 0; }
    h2 { color: #128C7E; border-bottom: 2px solid #25D366; padding-bottom: 8px; margin-top: 30px; }
    h3 { color: #128C7E; margin: 0 0 10px; }
    label { display: block; margin: 12px 0 5px; font-weight: 500; color: #333; }
    input, select {
      width: 100%;
      padding: 12px;
      margin-bottom: 4px;
      border: 1px solid #ced4da;
      border-radius: 6px;
      box-sizing: border-box;
      font-size: 16px;
      background: white;
    }
    input:focus, select:focus {
      border-color: #25D366;
      outline: none;
      box-shadow: 0 0 0 3px rgba(37, 211, 102, 0.2);
    }
    .grupo {
      background: white;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 25px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      border: 1px solid #e0e0e0;
    }
    button {
      background: #25D366;
      color: white;
      border: none;
      padding: 16px;
      width: 100%;
      font-size: 1.2em;
      font-weight: 600;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s;
      margin-top: 20px;
    }
    button:hover { background: #20b858; }
    .instrucao { font-size: 14px; color: #555; text-align: center; margin-top: 25px; line-height: 1.5; }
    .precos { font-size: 14px; color: #666; margin-top: 10px; font-style: italic; }
    p.intro { text-align: center; font-size: 1.1em; color: #444; margin-bottom: 30px; }
    /* MODAL */
    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.65);
      z-index: 2000;
      align-items: center;
      justify-content: center;
      padding: 15px;
    }
    .modal-content {
      background: white;
      max-width: 580px;
      width: 100%;
      border-radius: 12px;
      padding: 24px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 10px 30px rgba(0,0,0,0.25);
      position: relative;
    }
    .modal-header { text-align: center; margin-bottom: 20px; color: #128C7E; }
    .modal-body { line-height: 1.6; font-size: 1.05em; color: #333; }
    .modal-body strong { color: #25D366; }
    .modal-footer { text-align: center; margin-top: 25px; }
    /* Feedbacks */
    .feedback { font-size: 0.85em; margin-top: 4px; display: block; }
    .erro { color: #d32f2f; }
    .sucesso { color: #25D366; }
    /* Link reabrir modal */
    .reabrir-link {
      text-align: center;
      margin-top: 15px;
      font-size: 0.95em;
    }
    .reabrir-link a {
      color: #25D366;
      text-decoration: underline;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <header>
    <img src="https://storage.vmixhost.com/uploads/permanent/68c5704132ad3.png" alt="ROTA Internet Fibra Logo" class="logo">
    <h1>Ficha de Cadastro</h1>
  </header>
  <p class="intro">Preencha os dados abaixo e envie via WhatsApp para darmos continuidade com seu pedido de internet fibra √≥ptica!</p>
  <form id="fichaForm">
    <div class="grupo">
      <h2>üë§ Dados Pessoais</h2>
      <label for="nome">Nome completo:</label>
      <input type="text" id="nome" required>
      <label for="cpf">CPF:</label>
      <input type="text" id="cpf" required maxlength="11" placeholder="00000000000" oninput="atualizarFeedbackCPF(this)">
      <small id="feedbackCPF" class="feedback sucesso">0 / 11 d√≠gitos</small>
      <label for="nascimento">Data de nascimento:</label>
      <input type="date" id="nascimento" required>
      <label for="email">E-mail:</label>
      <input type="email" id="email" required>
      <label for="contato1">N√∫mero para contato 1:</label>
      <input type="tel" id="contato1" required maxlength="15" placeholder="(85) 9xxxx-xxxx" oninput="atualizarFeedbackTelefone(this, 'feedbackContato1')">
      <small id="feedbackContato1" class="feedback sucesso">Formato v√°lido</small>
      <label for="contato2">N√∫mero para contato 2:</label>
      <input type="tel" id="contato2" maxlength="15" placeholder="(85) 9xxxx-xxxx (opcional)" oninput="atualizarFeedbackTelefone(this, 'feedbackContato2')">
      <small id="feedbackContato2" class="feedback sucesso">Formato v√°lido (opcional)</small>
    </div>
    <div class="grupo">
      <h2>üè† Endere√ßo</h2>
      <label for="rua">Rua:</label>
      <input type="text" id="rua" required>
      <label for="bloco">Bloco:</label>
      <input type="text" id="bloco" required>
      <label for="lote">Lote:</label>
      <input type="text" id="lote" required>
      <label for="quadra">Quadra:</label>
      <input type="text" id="quadra" required>
      <label for="apartamento">Apartamento:</label>
      <input type="text" id="apartamento" required>
    </div>
    <div class="grupo">
      <h2>üì° Informa√ß√µes do Servi√ßo</h2>
      <label for="megas">Plano / MEGAS contratados:</label>
      <select id="megas" required>
        <option value="">Selecione o plano desejado...</option>
        <option value="200mb R$74,99">200 MB - R$ 74,99/m√™s</option>
        <option value="300mb R$94,99">300 MB - R$ 94,99/m√™s</option>
        <option value="400mb R$104,99">400 MB - R$ 104,99/m√™s</option>
        <option value="500mb R$114,99">500 MB - R$ 114,99/m√™s</option>
        <option value="600mb R$124,99">600 MB - R$ 124,99/m√™s</option>
        <option value="700mb R$134,99">700 MB - R$ 134,99/m√™s</option>
      </select>

      <!-- Nova se√ß√£o de Lista de Streaming (aparece s√≥ em planos 400+ MB) -->
      <div id="grupoStreaming" style="display: none; margin-top: 20px; padding: 15px; background: #f0fff0; border: 1px solid #25D366; border-radius: 8px;">
        <h3>üé• Lista de Streaming (B√¥nus Exclusivo)</h3>
        <p style="font-size: 0.95em; color: #555; margin-bottom: 12px;">
          Dispon√≠vel gratuitamente para planos de 400 MB ou superiores.<br>
          Escolha o tipo de lista desejada:
        </p>
        <label for="listaStreaming">Tipo de Lista:</label>
        <select id="listaStreaming">
          <option value="">Selecione...</option>
          <option value="LISTA BASE">LISTA BASE</option>
          <option value="LISTA COMPLETA">LISTA COMPLETA (+18)</option>
        </select>
        <small class="feedback" id="feedbackLista" style="display: block; margin-top: 6px; color: #555;">
          Observa√ß√£o: A Lista Completa inclui todo o conte√∫do da Lista Base + material direcionado a maiores de 18 anos.
        </small>
      </div>

      <div class="precos">
        Todos os planos incluem: Equipamento em comodato (roteador da empresa) + Instala√ß√£o 100% fibra √≥ptica.
      </div>
    </div>
    <div class="grupo">
      <h2>üí≥ Pagamento</h2>
      <label for="forma">Forma de pagamento da instala√ß√£o:</label>
      <select id="forma" required>
        <option value="">Selecione...</option>
        <option value="Cart√£o">Cart√£o</option>
        <option value="PIX">PIX</option>
        <option value="Esp√©cie">Esp√©cie</option>
      </select>
      <label for="vencimento">Data de vencimento do carn√™:</label>
      <select id="vencimento" required>
        <option value="">Selecione...</option>
        <option value="05">05</option>
        <option value="15">15</option>
        <option value="20">20</option>
        <option value="25">25</option>
      </select>
    </div>
    <div class="grupo">
      <h2>üì∂ Configura√ß√£o do Wi-Fi</h2>
      <label for="rede">Nome da rede Wi-Fi:</label>
      <input type="text" id="rede" required placeholder="Ex: ROTA_Fibra_123">
      <label for="senha">Senha da rede Wi-Fi:</label>
      <input type="text" id="senha" required minlength="8" maxlength="63" placeholder="M√≠nimo 8 caracteres" oninput="atualizarFeedbackSenha(this)">
      <small id="feedbackSenha" class="feedback sucesso">0 / 8 caracteres m√≠nimos</small>
      <small id="erroSenha" class="feedback erro" style="display: none;">
        A senha deve ter no m√≠nimo 8 caracteres.
      </small>
    </div>
    <button type="button" onclick="confirmarEnvio()">Enviar Cadastro via WhatsApp</button>
  </form>
  <p class="instrucao">üìå Ap√≥s confirmar, o WhatsApp abrir√° com todos os dados preenchidos. Confirme o envio!<br>
  Em seguida, envie as fotos dos documentos: RG/CNH (frente e verso) + comprovante de resid√™ncia no mesmo chat.<br>
  Atendimento ROTA: (85) 8885-4418</p>
  <div class="reabrir-link">
    <a href="#" onclick="document.getElementById('modalContrato').style.display='flex'; return false;">
      Ler novamente o resumo de informa√ß√µes
    </a>
  </div>

  <!-- Modal -->
  <div id="modalContrato" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Resumo de Informa√ß√µes referente ao Pedido</h2>
      </div>
      <div class="modal-body">
        <p><strong>NOVOS PLANOS COM CONTRATO DE 12 MESES</strong></p>
        <p>Dispon√≠veis apenas para <strong>novas ades√µes</strong> no endere√ßo de cadastro.</p>
      
        <p><strong>Principais condi√ß√µes:</strong></p>
        <ul>
          <li>Contrato de fidelidade de 12 meses.</li>
          <li>V√°lido s√≥ para maiores de 18 anos.</li>
          <li>Instala√ß√£o 100% fibra √≥ptica na resid√™ncia.</li>
          <li>Roteador em comodato (da empresa).</li>
          <li>Valor da instala√ß√£o: R$ 100,00 √† vista (pago no dia da instala√ß√£o).</li>
          <li>Aceitamos Esp√©cie, PIX e cart√£o (cr√©dito/d√©bito) com acr√©scimo da maquineta.</li>
        </ul>
        <p><strong>B√¥nus exclusivo:</strong></p>
        <p>Planos 400 Megas ou superiores ‚Üí Acesso GRATUITO a lista de transmiss√£o com conte√∫do streaming<br>
        (n√£o altera o valor da mensalidade, usando ou n√£o, √© apenas um b√¥nus. OBS: N√£o fornecemos o Aplicativo, somente a lista.)</p>
        <p><strong>Consulta de CPF:</strong> Realizamos diretamente no Serasa.</p>
        <p><strong>Prazo de instala√ß√£o:</strong> At√© 72h (m√°ximo 3 dias √∫teis) ap√≥s assinatura do contrato e entrada em rota.</p>
        <p><strong>Primeira fatura:</strong> Valor proporcional aos dias utilizados at√© o vencimento escolhido ou integral.</p>
        <p><strong>Equipamentos:</strong> Em caso de inadimpl√™ncia por mais de 30 dias, os equipamentos da empresa ser√£o recolhidos. Ao regularizar, s√£o reinstalados sem custo caso a instala√ß√£o esteja intacta no local em at√© 30 dias.</p>
        <p>Qualquer altera√ß√£o futura nos planos/valores ser√° avisada nos contatos cadastrados.</p>
        <p><strong>D√∫vidas? √â s√≥ chamar!</strong></p>
      </div>
      <div class="modal-footer">
        <button onclick="confirmarLeituraContrato()">Li e entendi</button>
      </div>
    </div>
  </div>

  <script>
    let leuContrato = false;

    document.addEventListener('DOMContentLoaded', function() {
      document.getElementById('modalContrato').style.display = 'flex';
    });

    function confirmarLeituraContrato() {
      leuContrato = true;
      document.getElementById('modalContrato').style.display = 'none';
    }

    function atualizarFeedbackCPF(input) {
      let valor = input.value.replace(/\D/g, '').substring(0, 11);
      input.value = valor;
      const feedback = document.getElementById('feedbackCPF');
      const length = valor.length;
      feedback.textContent = `${length} / 11 d√≠gitos`;
      if (length < 11) {
        input.style.borderColor = '#d32f2f';
        feedback.className = 'feedback erro';
      } else {
        input.style.borderColor = '#25D366';
        feedback.className = 'feedback sucesso';
      }
    }

    function atualizarFeedbackTelefone(input, feedbackId) {
      const valor = input.value.trim();
      const feedback = document.getElementById(feedbackId);
      const regexValido = /^\(?[0-9]{2}\)? ?[0-9]{4,5}-?[0-9]{4}$/;
      if (valor === '') {
        feedback.textContent = 'Campo opcional';
        feedback.className = 'feedback sucesso';
        input.style.borderColor = '#ced4da';
        return;
      }
      if (regexValido.test(valor) || /^[0-9]{10,11}$/.test(valor.replace(/\D/g, ''))) {
        feedback.textContent = 'Formato v√°lido';
        feedback.className = 'feedback sucesso';
        input.style.borderColor = '#25D366';
      } else {
        feedback.textContent = 'Formato inv√°lido (ex: (85) 99999-9999)';
        feedback.className = 'feedback erro';
        input.style.borderColor = '#d32f2f';
      }
    }

    function atualizarFeedbackSenha(input) {
      const valor = input.value.trim();
      const feedback = document.getElementById('feedbackSenha');
      const erro = document.getElementById('erroSenha');
      feedback.textContent = `${valor.length} / 8 caracteres m√≠nimos`;
      if (valor.length < 8) {
        input.style.borderColor = '#d32f2f';
        feedback.className = 'feedback erro';
        erro.style.display = 'block';
      } else {
        input.style.borderColor = '#25D366';
        feedback.className = 'feedback sucesso';
        erro.style.display = 'none';
      }
    }

    // Mostrar/esconder Lista de Streaming
    document.getElementById('megas').addEventListener('change', function() {
      const valorPlano = this.value;
      const grupoStreaming = document.getElementById('grupoStreaming');
      const selectLista = document.getElementById('listaStreaming');
      
      const planosComBonus = ['400mb R$104,99', '500mb R$114,99', '600mb R$124,99', '700mb R$134,99'];
      
      if (planosComBonus.includes(valorPlano)) {
        grupoStreaming.style.display = 'block';
        selectLista.required = true;
      } else {
        grupoStreaming.style.display = 'none';
        selectLista.required = false;
        selectLista.value = '';
      }
    });

    function confirmarEnvio() {
      const camposObrigatorios = [
        { id: 'nome', nome: 'Nome completo' },
        { id: 'cpf', nome: 'CPF' },
        { id: 'nascimento', nome: 'Data de nascimento' },
        { id: 'email', nome: 'E-mail' },
        { id: 'contato1', nome: 'N√∫mero para contato 1' },
        { id: 'rua', nome: 'Rua' },
        { id: 'bloco', nome: 'Bloco' },
        { id: 'lote', nome: 'Lote' },
        { id: 'quadra', nome: 'Quadra' },
        { id: 'apartamento', nome: 'Apartamento' },
        { id: 'megas', nome: 'Plano / MEGAS contratados' },
        { id: 'forma', nome: 'Forma de pagamento da instala√ß√£o' },
        { id: 'vencimento', nome: 'Data de vencimento do carn√™' },
        { id: 'rede', nome: 'Nome da rede Wi-Fi' }
      ];

      let todosPreenchidos = true;
      let primeiroCampoVazio = null;
      let mensagemErro = '';

      for (const campo of camposObrigatorios) {
        const elemento = document.getElementById(campo.id);
        if (elemento) {
          const valor = elemento.value.trim();
          if (!valor) {
            todosPreenchidos = false;
            if (!primeiroCampoVazio) primeiroCampoVazio = elemento;
            elemento.style.borderColor = '#d32f2f';
            mensagemErro += `- ${campo.nome}\n`;
          } else {
            elemento.style.borderColor = '#ced4da';
          }
        }
      }

      // Valida√ß√£o extra: Lista de Streaming quando vis√≠vel
      const grupoStreaming = document.getElementById('grupoStreaming');
      const listaStreamingEl = document.getElementById('listaStreaming');
      if (grupoStreaming.style.display === 'block' && !listaStreamingEl.value) {
        alert('Por favor, selecione o tipo de Lista de Streaming (b√¥nus dispon√≠vel para o plano escolhido).');
        listaStreamingEl.focus();
        return;
      }

      const senhaValor = document.getElementById('senha').value.trim();
      if (senhaValor.length < 8) {
        alert('A senha do Wi-Fi deve ter no m√≠nimo 8 caracteres.');
        document.getElementById('senha').focus();
        return;
      }

      const contato1Valor = document.getElementById('contato1').value.trim();
      const regexTel = /^\(?[0-9]{2}\)? ?[0-9]{4,5}-?[0-9]{4}$/;
      if (!regexTel.test(contato1Valor) && contato1Valor !== '') {
        alert('O N√∫mero para contato 1 est√° em formato inv√°lido.\nExemplo v√°lido: (85) 99999-9999');
        document.getElementById('contato1').focus();
        return;
      }

      if (!todosPreenchidos) {
        alert('Por favor, preencha os seguintes campos obrigat√≥rios:\n\n' + mensagemErro);
        if (primeiroCampoVazio) setTimeout(() => primeiroCampoVazio.focus(), 100);
        return;
      }

      if (!leuContrato) {
        alert('Por favor, leia e confirme o resumo de informa√ß√µes antes de prosseguir.');
        document.getElementById('modalContrato').style.display = 'flex';
        return;
      }

      if (confirm('Voc√™ confirma que leu e entendeu todas as informa√ß√µes e condi√ß√µes do servi√ßo?')) {
        enviarParaWhatsApp();
      }
    }

    function enviarParaWhatsApp() {
      const telefone = "558588854418";
      const nome = document.getElementById("nome").value.trim() || "‚Äî";
      const cpf = document.getElementById("cpf").value.trim() || "‚Äî";
      const nascimento = document.getElementById("nascimento").value || "‚Äî";
      const email = document.getElementById("email").value.trim() || "‚Äî";
      const contato1 = document.getElementById("contato1").value.trim() || "‚Äî";
      const contato2 = document.getElementById("contato2").value.trim() || "‚Äî";
      const rua = document.getElementById("rua").value.trim() || "‚Äî";
      const bloco = document.getElementById("bloco").value.trim() || "‚Äî";
      const lote = document.getElementById("lote").value.trim() || "‚Äî";
      const quadra = document.getElementById("quadra").value.trim() || "‚Äî";
      const apartamento = document.getElementById("apartamento").value.trim() || "‚Äî";
      const megas = document.getElementById("megas").value || "‚Äî";
      const forma = document.getElementById("forma").value || "‚Äî";
      const vencimento = document.getElementById("vencimento").value || "‚Äî";
      const rede = document.getElementById("rede").value.trim() || "‚Äî";
      const senha = document.getElementById("senha").value.trim() || "‚Äî";
      const listaStreaming = document.getElementById("listaStreaming").value.trim() || "‚Äî";
      const leuTexto = leuContrato ? "SIM" : "N√ÉO";

      let msg = "*NOVO CADASTRO - ROTA TELECOM*\n\n";
      msg += "*Dados Pessoais*\n";
      msg += "Nome: " + nome + "\n";
      msg += "CPF: " + cpf + "\n";
      msg += "Nascimento: " + nascimento + "\n";
      msg += "E-mail: " + email + "\n";
      msg += "Contato 1: " + contato1 + "\n";
      msg += "Contato 2: " + contato2 + "\n\n";
      msg += "*Endere√ßo*\n";
      msg += "Rua: " + rua + "\n";
      msg += "Bloco: " + bloco + "\n";
      msg += "Lote: " + lote + "\n";
      msg += "Quadra: " + quadra + "\n";
      msg += "Apartamento: " + apartamento + "\n\n";
      msg += "*Plano Escolhido*\n";
      msg += megas + "\n";
      msg += "(Equipamento em comodato | 100% fibra √≥ptica)\n\n";

      // Adiciona a lista de streaming se selecionada
      if (listaStreaming !== "‚Äî") {
        msg += "*Lista de Streaming (B√¥nus)*\n";
        msg += listaStreaming + "\n";
        msg += "(Gratuito para planos 400 MB ou superiores)\n\n";
      }

      msg += "*Pagamento*\n";
      msg += "Forma de pagamento referente a instala√ß√£o: " + forma + "\n";
      msg += "Vencimento do carn√™: dia " + vencimento + "\n\n";
      msg += "*Wi-Fi*\n";
      msg += "Nome da rede: " + rede + "\n";
      msg += "Senha: " + senha + "\n\n";
      msg += "*Leu as informa√ß√µes do Pedido:* " + leuTexto + "\n\n";

      msg += "----- RESUMO DE INFORMA√á√ïES REFERENTE AO PEDIDO -----\n\n";
      msg += "NOVOS PLANOS COM CONTRATO DE 12 MESES\n";
      msg += "Disponiveis apenas para novas ades√µes no endere√ßo de cadastro.\n\n";
      msg += "Principais condi√ß√µes:\n";
      msg += "- Contrato de fidelidade de 12 meses.\n";
      msg += "- V√°lido s√≥ para maiores de 18 anos.\n";
      msg += "- Instala√ß√£o 100% fibra √≥ptica na resid√™ncia.\n";
      msg += "- Roteador em comodato (da empresa).\n";
      msg += "- Valor da instala√ß√£o: R$ 100,00 a vista (pago no dia da instala√ß√£o).\n";
      msg += "- Aceitamos Esp√©cie, PIX e cart√£o (cr√©dito/debito) com acrescimo da maquineta.\n\n";
      msg += "B√¥nus exclusivo:\n";
      msg += "Planos 400 Megas ou superiores ‚Üí Acesso GRATUITO a lista de transmiss√£o com conte√∫do streaming\n";
      msg += "(nao altera o valor da mensalidade, usando ou n√£o, √© apenas um b√¥nus. OBS: N√£o fornecemos o Aplicativo, somente a lista.)\n\n";
      msg += "Consulta de CPF: Realizamos diretamente no Serasa.\n";
      msg += "Prazo de instala√ß√£o: At√© 72h (maximo 3 dias √∫teis) ap√≥s assinatura do contrato e entrada em rota.\n";
      msg += "Primeira fatura: Valor proporcional aos dias utilizados at√© o vencimento escolhido ou integral.\n\n";
      msg += "Equipamentos: Em caso de inadimplencia por mais de 30 dias, os equipamentos da empresa ser√£o recolhidos. Ao regularizar, s√£o reinstalados sem custo caso a instala√ß√£o esteja intacta no local em at√© 30 dias.\n\n";
      msg += "Qualquer altera√ß√£o futura nos planos/valores sera avisada nos contatos cadastrados.\n";
      msg += "Duvidas? √â so chamar!\n\n";
      msg += "----- FIM DO RESUMO -----\n\n";
      msg += "*Documentos:* Envie agora foto do RG/CNH (frente e verso) + comprovante de resid√™ncia.\n\n";
      msg += "Enviado via Ficha Online - ROTA";

      const encodedMsg = encodeURIComponent(msg);
      const url = `https://wa.me/${telefone}?text=${encodedMsg}`;
      window.open(url, "_blank");
    }
  </script>
</body>
</html>
